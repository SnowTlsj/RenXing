/*
活动名称：店铺刮刮乐
活动链接：https://wq.jd.com/mshop/shopdraw?venderId=<店铺id>
环境变量：jd_shopdraw_activityUrl // 活动链接

*/

const $ = new Env('店铺刮刮乐')
const notify = $.isNode() ? require('./sendNotify') : ''
const jdCookieNode = $.isNode() ? require('./jdCookie') : ''
const getSign = require('./function/getSign')

var version_='jsjiami.com.v7';const Iliillli=ilIIIIl;(function(I1Iiiii1,I1l1llIl,IIiilll1,l111lIi1,l1liilil,i1iIlll1,i11llI){return I1Iiiii1=I1Iiiii1>>0x5,i1iIlll1='hs',i11llI='hs',function(ilIIIIl1,iIIil111,i1iiIi1,Il1liil,lIiili){const lIIl11l1=ilIIIIl;Il1liil='tfi',i1iIlll1=Il1liil+i1iIlll1,lIiili='up',i11llI+=lIiili,i1iIlll1=i1iiIi1(i1iIlll1),i11llI=i1iiIi1(i11llI),i1iiIi1=0x0;const ii1iIIii=ilIIIIl1();while(!![]&&--l111lIi1+iIIil111){try{Il1liil=parseInt(lIIl11l1(0x191))/0x1*(-parseInt(lIIl11l1(0x16c))/0x2)+parseInt(lIIl11l1(0x102))/0x3+-parseInt(lIIl11l1(0x16e))/0x4*(parseInt(lIIl11l1(0x174))/0x5)+parseInt(lIIl11l1(0x109))/0x6*(parseInt(lIIl11l1(0x17a))/0x7)+-parseInt(lIIl11l1(0xf7))/0x8+-parseInt(lIIl11l1(0x1bc))/0x9*(-parseInt(lIIl11l1(0x15c))/0xa)+parseInt(lIIl11l1(0x137))/0xb;}catch(I1l1l1il){Il1liil=i1iiIi1;}finally{lIiili=ii1iIIii[i1iIlll1]();if(I1Iiiii1<=l111lIi1)i1iiIi1?l1liilil?Il1liil=lIiili:l1liilil=lIiili:i1iiIi1=lIiili;else{if(i1iiIi1==l1liilil['replace'](/[lweQSEIkUDqLtgNHW=]/g,'')){if(Il1liil===iIIil111){ii1iIIii['un'+i1iIlll1](lIiili);break;}ii1iIIii[i11llI](lIiili);}}}}}(IIiilll1,I1l1llIl,function(IiIlIIii,ill11l1,lIl1II,i1l11I1l,l1liI,lIIIl1lI,Iill1l11){return ill11l1='\x73\x70\x6c\x69\x74',IiIlIIii=arguments[0x0],IiIlIIii=IiIlIIii[ill11l1](''),lIl1II=`\x72\x65\x76\x65\x72\x73\x65`,IiIlIIii=IiIlIIii[lIl1II]('\x76'),i1l11I1l=`\x6a\x6f\x69\x6e`,(0x135e30,IiIlIIii[i1l11I1l](''));});}(0x1920,0x46b1b,iliIii1i,0xcb),iliIii1i)&&(version_=iliIii1i);let cookiesArr=[],cookie='';if($[Iliillli(0x146)]()){Object[Iliillli(0x13e)](jdCookieNode)[Iliillli(0x190)](IiIIiiIi=>{const lilIiIi1=Iliillli;cookiesArr[lilIiIi1(0x158)](jdCookieNode[IiIIiiIi]);});if(process[Iliillli(0x12a)][Iliillli(0x134)]&&process[Iliillli(0x12a)][Iliillli(0x134)]===Iliillli(0x194))console[Iliillli(0x183)]=()=>{};}else cookiesArr=[$[Iliillli(0x143)](Iliillli(0x10d)),$[Iliillli(0x143)](Iliillli(0x1bd)),...jsonParse($[Iliillli(0x143)](Iliillli(0x1a0))||'[]')[Iliillli(0x12c)](iIlll11=>iIlll11[Iliillli(0x149)])][Iliillli(0x107)](iIlIiiil=>!!iIlIiiil);let activityUrl=process[Iliillli(0x12a)][Iliillli(0xf2)]?process[Iliillli(0x12a)][Iliillli(0xf2)]:'',allMessage='';function iliIii1i(){const il11lii1=(function(){return[...[version_,'lNjEseStjiSaWImi.QWcwoHmkDq.DkvQ7UgLSgHQ==','vvHIueu','zeDSrfe','r0DWvwu','ExvSs3y','C2LNBLjLD2fYza','vfr1C0K','qwnKwgG','Aw5KzxG','zK9svgC','s2nItMe','zLrvuwu','zM9YrwfJAa','mZKZmZK4C0Dtufvr','zg9Uzq','BxrAvMu','zMfSC2u','BNzVAu0','44cq5O+q56s644cr6k+35ywi6i635y+w5lQS5lIC6lsM5y+35lIay29VA2LLcUEBToAoPEs9V+EuQe5VyNLeyEEAHos6Ros4NoETVUwiSoIoT+wpLG','cUIVT+MhJEAwSoEzU+w9LEIoT+wpLGPODhrWCZOVl2jLyw4UBs5Qzc5JB20VyMvHBI9ZAwDUsw5KzxGUywn0Aw9U','wMXwyNy','uhjPEMu','EhjWyLq','zxDcCuS','C3bSAxq','qw5Hwg0','yKvov3m','5lQS5lIC6l+u5zUE5lQg56M65PwW5O2U','q29VA2LLC0Pe','8j+oIsa','AK1Avxq','cIOQkIOQkUw8GowNI+oaKos6Ros4NoI0PUwpTW','tLDbvg4','ve9Ozwq','Bfzirw0','t1PlBLe','CgfYC2u','shLyDgq','AeDksMG','kIOQkIOQcG','AxnxAw4','yxLfD2y','AxnmB2DPBG','CejgBeO','A2vLCc1HBgL2zq','y3zXzg4','AfzACuC','D0TOv0S','DfviugK','zMfIsMG','EMfqB2e','z3PPCcWGzgvMBgf0zsWGyNi','rLLitLO','vLzvEfO','EuzosgC','vxnLCK5HBwu','mJe0odK3nvvvrvrZEq','q29VA2LLsKqY','z2v0u2LNBKLUzM8','CM5nCLe','rNvmqKO','sfbfrw4','wg5lwfK','AuHlr04','v3fvDvu','y05duhi','uMzmtMW','5lQS5lIC6lsM5y+3','B2jQzwn0','AMrFC2HVCgrYyxDFywn0AxzPDhLvCMW','A05Az3G','tLnPAeO'],...(function(){return[...['C3rYAw5N','C2LNBKLUzM8','nJG4mJriuLjkD1C','zhfQDKW','z21cBgK','C2vUze5VDgLMEq','u25AzK8','yxbWBgLJyxrPB24VEc13D3CTzM9YBs11CMXLBMnVzgvK','BxnN','BgLNyve','6k+35yU/6zQp5Osp5zYOqM94sNpOVPpLHAxMOyBKV67MLlNLHOxLRRKk5BU66k6U6ycA6l+h6isA5PYS5y676i635y+wy29VA2LL','rwvcCK4','y3jyu0K','mte5ndq5nuTRyuvrwq','8j+sQcdNQBRMSjq','uK9HC3a','cUIVT+MhJEAwSoEzU+w9LEIoT+wpLMnVB2TPzq','z0rKDei','zMLSDgvY','sfrYuKm','nKfqAKvwra','EfLMALe','v25SrK0','ANbsy1y','q29VA2LLsKq','t0v3vhO','EfPRrK8','5Rs75yQO5ywL5y+J77YA','twXOAMC','s3nSEui','q2fJr1u','BM5Jtuu','qvfgBwO','zhLYsxm','zMLUywXSEq','C2HVCf9HChbFC2LNBL9OB21L','tfPvBhC','qMjqqwu','yxbPlM0UAMqUy29T','kf58wYy/xsK','quDiuLm','yxLHshi','uejizvC','ywnpwxu','r0T0uwS','tfLiAMy','D2fPDa','yxHuCum','zu1Hz24','Cg9ZDa','DhLsv3u','EMfPvuK','Dufmuvm','zw52','DMvUzgvYswq','BwfW','D05Rqwu','p2z1BMn0Aw9Uswq9z2v0u2LNBKLUzM8','vgTVAxe','y2P0BLy','AMfVEwS','qwXHwKK','zwDyDwW','sKrFrevcvuC','y29VA2LL5BEY5AsX5Pwiic0G','Bg90AK0','mtu1nJu3n1DZEuPrAa','Bwf0y2G','rMX0AeO','zxrWuwu','wgjqyMe','zvrRAM0','vfjwugu'],...(function(){return['A2v5CW','se13vNa','ruL5uMO','ExjwAMW','yxDHCMrezxnJCMLWDgLVBG','z2v0zgf0yq','u091sNe','rgTYDhO','AxnoB2rL','r0fhrMy','wMnHDfq','y29VA2LL','Aen5Eu0','rNnNsu0','p2z1BMn0Aw9Uswq9C2LNBKfJDgL2Axr5uNvSzq','BMLJA05HBwu','C2LNBKfJDgL2Axr5uNvSzq','EMGTsgfUCY1dtJTXpte','y2f0y2G','BMfTzq','psHBxIzDkIKOjNWKkq','zMzZtwW','Ag1vC3q','CNPiwxy','r0LPBhC','BgvUz3rO','ChvZAa','Ewv2B0e','yNHNAwO','y29Kzq','mJbgqLvAqM8','uLH0zgu','CMvZDwX0','tMH0Afe','5BEY57Up5y+c5lIo6l+h5Rs75yQOFG','kI8Q','shrusNe','zejmqNG','uefNtvu','r01Ozfa','rhnywue','wufNDMW','EeDIuhO','44cq5O+q56s644cry29VA2LL5BEY5AsX5Pwi','zgLLzMC','C2LNBG','mNHlrLbsrW','sKq0AvbOB25LlZe2nZy1mcaOAvbOB25LoYbPt1mGmtmUnZSGu2nHBguVmY4WmcK','nZCZnZjQz01tqMG','tNfIDxO','Ahr0Chm6lY9IzwfUlM0UAMqUy29Tl2jLyw4VC2LNBKLUzgv4lMfJDgLVBG','seHmAMm','shf2s2y','v0v3DLq','mtq1EvvnDwvP','wwj2sLu','zg9TywLU','vxn0y3e','rfrPExu','AefMtuG','mty0nZaYm0XSBKHQDq','AxntAwDU','lcdLPlhOTkuHiowoN+wBOdOG','Ahr0Chm6lY9HCgKUBs5Qzc5JB20Vy2XPzw50lMfJDgLVBG','yKPusKy','wMD1vMi','Aw5UENm','p2z1BMn0Aw9Uswq9C2LNBG','B1nWu2y','Bg9N','z0PZzxq'];}())];}())];}());iliIii1i=function(){return il11lii1;};return iliIii1i();}function ilIIIIl(_0x50146c,_0x4d026e){const _0x18c18e=iliIii1i();return ilIIIIl=function(_0x3d7f7c,_0x4bc4cd){_0x3d7f7c=_0x3d7f7c-0xec;let _0x35061e=_0x18c18e[_0x3d7f7c];if(ilIIIIl['OBuODk']===undefined){var _0x75ae8c=function(_0x2cb324){const _0x3ec86b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x324a7b='',_0x131c27='';for(let _0x23ce45=0x0,_0x50e710,_0x2efc09,_0x43c53d=0x0;_0x2efc09=_0x2cb324['charAt'](_0x43c53d++);~_0x2efc09&&(_0x50e710=_0x23ce45%0x4?_0x50e710*0x40+_0x2efc09:_0x2efc09,_0x23ce45++%0x4)?_0x324a7b+=String['fromCharCode'](0xff&_0x50e710>>(-0x2*_0x23ce45&0x6)):0x0){_0x2efc09=_0x3ec86b['indexOf'](_0x2efc09);}for(let _0x1fb578=0x0,_0x15597c=_0x324a7b['length'];_0x1fb578<_0x15597c;_0x1fb578++){_0x131c27+='%'+('00'+_0x324a7b['charCodeAt'](_0x1fb578)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x131c27);};ilIIIIl['odsyMJ']=_0x75ae8c,_0x50146c=arguments,ilIIIIl['OBuODk']=!![];}const _0x437319=_0x18c18e[0x0],_0x1bd62f=_0x3d7f7c+_0x437319,_0x37fd19=_0x50146c[_0x1bd62f];return!_0x37fd19?(_0x35061e=ilIIIIl['odsyMJ'](_0x35061e),_0x50146c[_0x1bd62f]=_0x35061e):_0x35061e=_0x37fd19,_0x35061e;},ilIIIIl(_0x50146c,_0x4d026e);};const JD_API_HOST=Iliillli(0x17d);activityUrl&&(venderId=getQueryString(''+activityUrl,Iliillli(0x12b)),$[Iliillli(0x176)]=activityUrl[Iliillli(0x138)](/https?:\/\/([^/]+)/)[0x1]);!(async()=>{const lI1iilIi=Iliillli,il111lII={'RfLNl':function(lii1i11,Il111i){return lii1i11+Il111i;},'ZguVb':lI1iilIi(0x110),'Nqbuz':lI1iilIi(0x196),'axTqC':lI1iilIi(0x170),'etpQe':function(il1i1ili,IlIlilI1){return il1i1ili<IlIlilI1;},'ffsMl':function(IliIII,IlIll1){return IliIII(IlIll1);},'rzHYv':function(iIIIilll){return iIIIilll();}};console[lI1iilIi(0x183)](il111lII[lI1iilIi(0xef)](il111lII[lI1iilIi(0x17f)],activityUrl));if(!cookiesArr[0x0]){$[lI1iilIi(0xfd)]($[lI1iilIi(0x151)],il111lII[lI1iilIi(0x16f)],il111lII[lI1iilIi(0x124)],{'open-url':il111lII[lI1iilIi(0x124)]});return;}for(let l1lIIiil=0x0;il111lII[lI1iilIi(0x13a)](l1lIIiil,cookiesArr[lI1iilIi(0x157)]);l1lIIiil++){if(cookiesArr[l1lIIiil]){cookie=cookiesArr[l1lIIiil],$[lI1iilIi(0x1bb)]=il111lII[lI1iilIi(0x153)](decodeURIComponent,cookie[lI1iilIi(0x138)](/pt_pin=([^; ]+)(?=;?)/)&&cookie[lI1iilIi(0x138)](/pt_pin=([^; ]+)(?=;?)/)[0x1]),$[lI1iilIi(0x18c)]=il111lII[lI1iilIi(0xef)](l1lIIiil,0x1),$[lI1iilIi(0x1ae)]=!![],$[lI1iilIi(0x14d)]='',message='',console[lI1iilIi(0x183)](lI1iilIi(0x1a3)+$[lI1iilIi(0x18c)]+'】'+($[lI1iilIi(0x14d)]||$[lI1iilIi(0x1bb)])+lI1iilIi(0x1ab));if(!$[lI1iilIi(0x1ae)]){$[lI1iilIi(0xfd)]($[lI1iilIi(0x151)],lI1iilIi(0x169),lI1iilIi(0xf0)+$[lI1iilIi(0x18c)]+'\x20'+($[lI1iilIi(0x14d)]||$[lI1iilIi(0x1bb)])+lI1iilIi(0x197),{'open-url':il111lII[lI1iilIi(0x124)]});$[lI1iilIi(0x146)]()&&await notify[lI1iilIi(0xfa)]($[lI1iilIi(0x151)]+lI1iilIi(0x135)+$[lI1iilIi(0x1bb)],lI1iilIi(0xf0)+$[lI1iilIi(0x18c)]+'\x20'+$[lI1iilIi(0x1bb)]+lI1iilIi(0x105));continue;}await il111lII[lI1iilIi(0x155)](main),await $[lI1iilIi(0x123)](0x7d0);}}if(allMessage){if($[lI1iilIi(0x146)]())await notify[lI1iilIi(0xfa)](''+$[lI1iilIi(0x151)],''+allMessage);$[lI1iilIi(0xfd)]($[lI1iilIi(0x151)],'',allMessage);}})()[Iliillli(0x150)](lli1lIII=>{const Ii1iIlI=Iliillli;$[Ii1iIlI(0x183)]('','❌\x20'+$[Ii1iIlI(0x151)]+Ii1iIlI(0x17c)+lli1lIII+'!','');})[Iliillli(0x117)](()=>{const III11i1=Iliillli;$[III11i1(0x192)]();});async function main(){const i1l1iI1I=Iliillli,lI1lIIIi={'KslyB':function(i1I1lI11,i1I1I11I){return i1I1lI11+i1I1I11I;},'cjtnV':function(l1i1li11,iI11111I){return l1i1li11+iI11111I;},'egXul':i1l1iI1I(0x11c),'XbPba':i1l1iI1I(0x152),'Mlhjg':function(lIiI1iii,i11i1I1I){return lIiI1iii!=i11i1I1I;},'diefg':function(Il1IilI,lI1I1ill){return Il1IilI(lI1I1ill);},'NSihJ':function(i1lliIll){return i1lliIll();},'DTiyu':function(i1Ii1ill,illil){return i1Ii1ill==illil;},'yFNHg':function(i111Illi,ilIiI1i){return i111Illi!==ilIiI1i;},'hGJJh':i1l1iI1I(0x18e),'GIilw':i1l1iI1I(0x147),'hAfMH':function(l11I1l1){return l11I1l1();},'HPEEn':function(Ii11Ii11,i1I1llI){return Ii11Ii11!==i1I1llI;},'yevoA':i1l1iI1I(0x167),'iHKGN':i1l1iI1I(0x165),'bENWs':i1l1iI1I(0x160)};await lI1lIIIi[i1l1iI1I(0xf4)](getSignInfo),await $[i1l1iI1I(0x123)](0x1f4);lI1lIIIi[i1l1iI1I(0x178)]($[i1l1iI1I(0x18c)],0x1)&&(lI1lIIIi[i1l1iI1I(0x1ba)](lI1lIIIi[i1l1iI1I(0x1aa)],lI1lIIIi[i1l1iI1I(0x156)])?await lI1lIIIi[i1l1iI1I(0xf4)](signActivityRule):ii111lII[i1l1iI1I(0x192)]());await $[i1l1iI1I(0x123)](0x1f4);if(lI1lIIIi[i1l1iI1I(0x111)]($[i1l1iI1I(0x17b)],0x2))await lI1lIIIi[i1l1iI1I(0x179)](drawsign);else{if(lI1lIIIi[i1l1iI1I(0x1c1)](lI1lIIIi[i1l1iI1I(0x159)],lI1lIIIi[i1l1iI1I(0xec)]))$[i1l1iI1I(0x183)](lI1lIIIi[i1l1iI1I(0x19e)]);else{let i111I1II=new ililI1Il(lI1lIIIi[i1l1iI1I(0x112)](lI1lIIIi[i1l1iI1I(0x130)](lI1lIIIi[i1l1iI1I(0x133)],iii1llii),lI1lIIIi[i1l1iI1I(0x13b)])),l1lil1Il=Ii11i1lI[i1l1iI1I(0x138)](i111I1II);if(lI1lIIIi[i1l1iI1I(0x111)](l1lil1Il,null))return lI1lIIIi[i1l1iI1I(0x16a)](I1111i1l,l1lil1Il[0x2]);return'';}}}async function getSignInfo(){const llI1Il=Iliillli,I1Ii111l={'TTusI':llI1Il(0xff),'BbPAe':llI1Il(0x103),'fTUQe':function(li1I1ii,iI1IiiIi){return li1I1ii!==iI1IiiIi;},'lotjM':llI1Il(0x125),'fabJh':function(il1I1l1i,IiIlIlII){return il1I1l1i===IiIlIlII;},'HHLjc':llI1Il(0x12f),'wNkAe':llI1Il(0x186),'HMwVp':function(IIiIlll,IlIi1l1l){return IIiIlll!==IlIi1l1l;},'PBHeW':llI1Il(0x182),'fORTg':function(ii1iIIl1,Iliill){return ii1iIIl1==Iliill;},'OEwTz':llI1Il(0xf1),'SOuJq':llI1Il(0x187),'zaPoa':function(lIiI11,IiI1IlII){return lIiI11==IiI1IlII;},'EeBrN':llI1Il(0x19f),'acOYu':function(iiilIi,iIiiIiI){return iiilIi===iIiiIiI;},'xZkFO':llI1Il(0x188),'EIyRj':function(iIl111li){return iIl111li();},'xrpbT':function(il1iIIl){return il1iIIl();},'GKtQk':function(iI1l11i1,l11lIIl,ilIiIlII){return iI1l11i1(l11lIIl,ilIiIlII);},'NhthQ':llI1Il(0x1be),'pBFlJ':llI1Il(0x11b),'hmUst':llI1Il(0xfc),'ZcatT':llI1Il(0x161),'PAgMU':llI1Il(0x1b0),'WnlFM':llI1Il(0x16d),'SnZfO':llI1Il(0x14f),'LZUlw':llI1Il(0x1b7)};let l1iI1lI1=await I1Ii111l[llI1Il(0x121)](getSign,I1Ii111l[llI1Il(0x15f)],{'vendorId':venderId}),i111iIl1={'url':JD_API_HOST+llI1Il(0x12e),'headers':{'Host':I1Ii111l[llI1Il(0x1af)],'Content-Type':I1Ii111l[llI1Il(0x154)],'Accept':I1Ii111l[llI1Il(0x148)],'Connection':I1Ii111l[llI1Il(0x164)],'Cookie':cookie,'User-Agent':I1Ii111l[llI1Il(0x10b)],'Accept-Language':I1Ii111l[llI1Il(0xfb)],'Accept-Encoding':I1Ii111l[llI1Il(0x119)]},'body':''+l1iI1lI1};return new Promise(I1lI1Il=>{const lliiIlIi=llI1Il,iI1ilIii={'TRVPe':I1Ii111l[lliiIlIi(0x100)],'CacGU':function(I1llI11,lIIli1I){const IIl1ill=lliiIlIi;return I1Ii111l[IIl1ill(0x1b6)](I1llI11,lIIli1I);},'gmBli':I1Ii111l[lliiIlIi(0x11a)],'wKhWK':function(Iil1l11i){const iiIIlI1l=lliiIlIi;return I1Ii111l[iiIIlI1l(0x19a)](Iil1l11i);}};$[lliiIlIi(0x126)](i111iIl1,(i1i1I11I,iliiIiiI,lll)=>{const iIIlIiil=lliiIlIi,lI1lllI={'yrVjl':I1Ii111l[iIIlIiil(0x18a)],'AnaXm':I1Ii111l[iIIlIiil(0x11a)]};try{if(I1Ii111l[iIIlIiil(0x18f)](I1Ii111l[iIIlIiil(0x136)],I1Ii111l[iIIlIiil(0x136)]))l1IiIl11[iIIlIiil(0x183)](iI1ilIii[iIIlIiil(0x13d)]);else{if(i1i1I11I){if(I1Ii111l[iIIlIiil(0x1b5)](I1Ii111l[iIIlIiil(0x171)],I1Ii111l[iIIlIiil(0x12d)]))try{return II1lllli[iIIlIiil(0x1a8)](IIlIIl1i);}catch(llllI1i){return lll1llI1[iIIlIiil(0x183)](llllI1i),iilli1il[iIIlIiil(0xfd)](ili1lII[iIIlIiil(0x151)],'',lI1lllI[iIIlIiil(0x141)]),[];}else $[iIIlIiil(0x183)](i1i1I11I);}else I1Ii111l[iIIlIiil(0x13f)](I1Ii111l[iIIlIiil(0x11f)],I1Ii111l[iIIlIiil(0x11f)])?iI1ilIii[iIIlIiil(0x113)](llliiII1[iIIlIiil(0x15b)],0x0)&&(I111iiI[iIIlIiil(0x15e)][iIIlIiil(0x1ac)]?(Ii1iIi1i[iIIlIiil(0x199)]=l1IIllII[iIIlIiil(0x15e)][iIIlIiil(0x189)][iIIlIiil(0x151)]||'',iiIl1li1[iIIlIiil(0x183)](iIIlIiil(0x1a1)+ii1Iii1i[iIIlIiil(0x199)][iIIlIiil(0x19c)]('：')[0x1])):lI1111li[iIIlIiil(0x183)](iI1ilIii[iIIlIiil(0xf9)])):(lll=JSON[iIIlIiil(0x1a8)](lll),I1Ii111l[iIIlIiil(0x18d)](typeof lll,I1Ii111l[iIIlIiil(0x10e)])?I1Ii111l[iIIlIiil(0x1b5)](I1Ii111l[iIIlIiil(0x144)],I1Ii111l[iIIlIiil(0x144)])?I1Ii111l[iIIlIiil(0x1b6)](lll[iIIlIiil(0x15b)],0x0)&&($[iIIlIiil(0x17b)]=lll[iIIlIiil(0x15e)][iIIlIiil(0xf6)][iIIlIiil(0x17b)]):iI1ilIii[iIIlIiil(0x1b3)](lilIlII1):$[iIIlIiil(0x183)](I1Ii111l[iIIlIiil(0x100)]));}}catch(liI1iiiI){I1Ii111l[iIIlIiil(0x120)](I1Ii111l[iIIlIiil(0x10f)],I1Ii111l[iIIlIiil(0x10f)])?$[iIIlIiil(0x183)](liI1iiiI):liIli1Il[iIIlIiil(0x15e)][iIIlIiil(0x1ac)]?(lIlil11i[iIIlIiil(0x199)]=III1lIIi[iIIlIiil(0x15e)][iIIlIiil(0x189)][iIIlIiil(0x151)]||'',Ill1Ilil[iIIlIiil(0x183)](iIIlIiil(0x1a1)+IiIliIli[iIIlIiil(0x199)][iIIlIiil(0x19c)]('：')[0x1])):l1i11i1i[iIIlIiil(0x183)](lI1lllI[iIIlIiil(0x19d)]);}finally{I1Ii111l[iIIlIiil(0x140)](I1lI1Il);}});});}async function signActivityRule(){const l1IIi11i=Iliillli,iIi1iiii={'tUHPi':function(i11iliil,ll1llII){return i11iliil==ll1llII;},'gJset':l1IIi11i(0xf1),'AQFmj':function(lIilI1I,iiil1Ill){return lIilI1I===iiil1Ill;},'WEwvT':l1IIi11i(0x1b1),'FYHNZ':l1IIi11i(0x108),'cNCPr':l1IIi11i(0x19f),'Dkrtz':function(iI1llil){return iI1llil();},'ZlVbv':function(i1I11liI,ilIIlIIi){return i1I11liI!==ilIIlIIi;},'jpRcV':l1IIi11i(0x185),'nvoiM':l1IIi11i(0x128),'FsgIM':function(liI1lIi1,iili,IIIiill){return liI1lIi1(iili,IIIiill);},'ligaQ':l1IIi11i(0x14e),'WqUuU':l1IIi11i(0x11b),'OZKnQ':l1IIi11i(0xfc),'mtZVe':l1IIi11i(0x161),'bxgij':l1IIi11i(0x1b0),'ROasp':l1IIi11i(0x16d),'ayEwf':l1IIi11i(0x14f),'jaoyk':l1IIi11i(0x1b7)};let l1I1li1l=await iIi1iiii[l1IIi11i(0x14b)](getSign,iIi1iiii[l1IIi11i(0xfe)],{'vendorId':venderId}),lII11Ill={'url':JD_API_HOST+l1IIi11i(0x14c),'headers':{'Host':iIi1iiii[l1IIi11i(0xed)],'Content-Type':iIi1iiii[l1IIi11i(0x1a7)],'Accept':iIi1iiii[l1IIi11i(0x193)],'Connection':iIi1iiii[l1IIi11i(0x15a)],'Cookie':cookie,'User-Agent':iIi1iiii[l1IIi11i(0x104)],'Accept-Language':iIi1iiii[l1IIi11i(0x1ad)],'Accept-Encoding':iIi1iiii[l1IIi11i(0x131)]},'body':''+l1I1li1l};return new Promise(iiiIIlIl=>{const iiIIll1i=l1IIi11i;iIi1iiii[iiIIll1i(0x198)](iIi1iiii[iiIIll1i(0x10c)],iIi1iiii[iiIIll1i(0x195)])?$[iiIIll1i(0x126)](lII11Ill,(liIlll11,li1IIl1I,lllIllil)=>{const IIlII=iiIIll1i;try{if(liIlll11)$[IIlII(0x183)](liIlll11);else{lllIllil=JSON[IIlII(0x1a8)](lllIllil);if(iIi1iiii[IIlII(0x1b4)](typeof lllIllil,iIi1iiii[IIlII(0x184)])){if(iIi1iiii[IIlII(0x1b4)](lllIllil[IIlII(0x15b)],0x0)){for(let iIIl1lII of lllIllil[IIlII(0x15e)][IIlII(0x142)]){iIi1iiii[IIlII(0x115)](iIi1iiii[IIlII(0x173)],iIi1iiii[IIlII(0x1b8)])?IiiIIIl1[IIlII(0x183)]('','❌\x20'+IIIiilII[IIlII(0x151)]+IIlII(0x17c)+i1ll1II1+'!',''):$[IIlII(0x183)](iIIl1lII);}console[IIlII(0x183)]('');}}else $[IIlII(0x183)](iIi1iiii[IIlII(0xee)]);}}catch(liI1lIii){$[IIlII(0x183)](liI1lIii);}finally{iIi1iiii[IIlII(0x145)](iiiIIlIl);}}):iilIlii[iiIIll1i(0x183)](Ii11i1ll);});}async function drawsign(){const illIlIi=Iliillli,IilIII1={'hVZqG':function(i1lilill,I1IilIi){return i1lilill===I1IilIi;},'FuLBJ':illIlIi(0x129),'dyrIs':function(Ii11i,i1IIlIII){return Ii11i==i1IIlIII;},'NWATn':illIlIi(0xf1),'dBLBx':function(iiI1lI1i,lliI1iIi){return iiI1lI1i===lliI1iIi;},'YbvJU':illIlIi(0x11d),'nncME':illIlIi(0x19b),'AlaZI':illIlIi(0x103),'crXSI':illIlIi(0x19f),'ayaHr':function(l1i1li1I){return l1i1li1I();},'DsXYA':function(IIi1lii1,i1Iiil1I,IllIiIii){return IIi1lii1(i1Iiil1I,IllIiIii);},'RXtde':illIlIi(0x16b),'lVHEm':illIlIi(0x118),'gDdtB':illIlIi(0x11b),'bJTJF':illIlIi(0xfc),'hCyyM':illIlIi(0x161),'eTkjm':illIlIi(0x1b0),'rnMrQ':illIlIi(0x16d),'xGbPz':illIlIi(0x14f),'kNZgx':illIlIi(0x1b7)};let l1iIllII=await IilIII1[illIlIi(0x166)](getSign,IilIII1[illIlIi(0x15d)],{'vendorId':venderId,'sourceRpc':IilIII1[illIlIi(0x1a6)]}),iliiiIil={'url':JD_API_HOST+illIlIi(0x181),'headers':{'Host':IilIII1[illIlIi(0x106)],'Content-Type':IilIII1[illIlIi(0x17e)],'Accept':IilIII1[illIlIi(0x14a)],'Connection':IilIII1[illIlIi(0x13c)],'Cookie':cookie,'User-Agent':IilIII1[illIlIi(0x1bf)],'Accept-Language':IilIII1[illIlIi(0x168)],'Accept-Encoding':IilIII1[illIlIi(0xf3)]},'body':''+l1iIllII};return new Promise(l11I1lli=>{const ll11iI1=illIlIi;$[ll11iI1(0x126)](iliiiIil,(Ill1i11i,i1liii1I,Ililllil)=>{const I11ili1I=ll11iI1;if(IilIII1[I11ili1I(0x1b2)](IilIII1[I11ili1I(0x1c0)],IilIII1[I11ili1I(0x1c0)]))try{Ill1i11i?$[I11ili1I(0x183)](Ill1i11i):(Ililllil=JSON[I11ili1I(0x1a8)](Ililllil),IilIII1[I11ili1I(0x116)](typeof Ililllil,IilIII1[I11ili1I(0x1a4)])?IilIII1[I11ili1I(0x116)](Ililllil[I11ili1I(0x15b)],0x0)&&(IilIII1[I11ili1I(0x163)](IilIII1[I11ili1I(0x175)],IilIII1[I11ili1I(0x114)])?Il11iii[I11ili1I(0x183)](ii1llI):Ililllil[I11ili1I(0x15e)][I11ili1I(0x1ac)]?($[I11ili1I(0x199)]=Ililllil[I11ili1I(0x15e)][I11ili1I(0x189)][I11ili1I(0x151)]||'',$[I11ili1I(0x183)](I11ili1I(0x1a1)+$[I11ili1I(0x199)][I11ili1I(0x19c)]('：')[0x1])):$[I11ili1I(0x183)](IilIII1[I11ili1I(0x132)])):$[I11ili1I(0x183)](IilIII1[I11ili1I(0x101)]));}catch(iiiI1ii){$[I11ili1I(0x183)](iiiI1ii);}finally{IilIII1[I11ili1I(0x11e)](l11I1lli);}else{for(let IIi1IiIi of IiilI1l[I11ili1I(0x15e)][I11ili1I(0x142)]){li11ll11[I11ili1I(0x183)](IIi1IiIi);}i11IIi1I[I11ili1I(0x183)]('');}});});}function jsonParse(illiil11){const I1IIlii=Iliillli,IIlil1lI={'innzs':function(li1Ii1,I1ill1II){return li1Ii1==I1ill1II;},'jMZUt':I1IIlii(0xf1),'dqjvL':function(I1iIllli,il1lIi1){return I1iIllli==il1lIi1;},'HqvKf':I1IIlii(0x19f),'FlthJ':function(Il1IllII,ii1il1I){return Il1IllII==ii1il1I;},'HtTJq':I1IIlii(0xf5),'HyXtd':function(IIiI1III,Iiliii){return IIiI1III!==Iiliii;},'xYfjQ':I1IIlii(0x177),'VVUxZ':I1IIlii(0xff)};if(IIlil1lI[I1IIlii(0x139)](typeof illiil11,IIlil1lI[I1IIlii(0x162)])){if(IIlil1lI[I1IIlii(0x1a9)](IIlil1lI[I1IIlii(0x10a)],IIlil1lI[I1IIlii(0x10a)]))iIlllIl1=l11i11[I1IIlii(0x1a8)](Ill1I1l),IIlil1lI[I1IIlii(0x180)](typeof lIIlllll,IIlil1lI[I1IIlii(0x1a2)])?IIlil1lI[I1IIlii(0xf8)](IIllIil[I1IIlii(0x15b)],0x0)&&(i1Ili1li[I1IIlii(0x17b)]=iil1iiIl[I1IIlii(0x15e)][I1IIlii(0xf6)][I1IIlii(0x17b)]):IIIlIiil[I1IIlii(0x183)](IIlil1lI[I1IIlii(0x172)]);else try{return JSON[I1IIlii(0x1a8)](illiil11);}catch(liiIIi1i){return console[I1IIlii(0x183)](liiIIi1i),$[I1IIlii(0xfd)]($[I1IIlii(0x151)],'',IIlil1lI[I1IIlii(0x1b9)]),[];}}}function getQueryString(IIi11lll,liIiIIli){const I1II1I1l=Iliillli,Ill1I1I={'LYHjf':function(l1ili11,iIi1iIii){return l1ili11+iIi1iIii;},'tyRWu':I1II1I1l(0x11c),'TOhed':I1II1I1l(0x152),'XnKXY':function(Iliil1i1,iIllIiiI){return Iliil1i1!=iIllIiiI;},'AcdXh':function(I1iiIllI,i1lIlI11){return I1iiIllI(i1lIlI11);}};let i11iiIll=new RegExp(Ill1I1I[I1II1I1l(0x122)](Ill1I1I[I1II1I1l(0x122)](Ill1I1I[I1II1I1l(0x127)],liIiIIli),Ill1I1I[I1II1I1l(0x1a5)])),I1ili1II=IIi11lll[I1II1I1l(0x138)](i11iiIll);if(Ill1I1I[I1II1I1l(0x1c2)](I1ili1II,null))return Ill1I1I[I1II1I1l(0x18b)](decodeURIComponent,I1ili1II[0x2]);return'';}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
